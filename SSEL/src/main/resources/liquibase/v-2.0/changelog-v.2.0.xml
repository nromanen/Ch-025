<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

	<changeSet id="2014-11-08-create-trigger-table-topic-1" author="Roma">
		<comment>Create trigger table topic</comment>
		<sql splitStatements="false">
			CREATE TRIGGER BlockOrderTrigger BEFORE INSERT ON block FOR EACH ROW BEGIN
			SET new.block_order = (select max(id) from block)+1;
			END
		</sql>
		<sql splitStatements="false">
			CREATE TRIGGER orderTrigger BEFORE INSERT ON topic FOR EACH ROW BEGIN
			SET new.topic_order = (select max(id) from topic)+1;
			END
		</sql>
	</changeSet>

</databaseChangeLog>